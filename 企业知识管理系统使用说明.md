# 企业知识管理系统使用说明

## 项目概述
这是一个简化的企业内部知识管理系统，主要支持视频内容的管理和播放，包括录屏功能。

## 功能特性

### 核心功能
1. **搜索功能**
   - 支持标题关键字搜索
   - 实时搜索结果展示
   - 视频预览功能

2. **内容管理**
   - 视频上传和播放
   - 录屏功能（一键录屏）
   - 标题管理
   - 视频内容展示

3. **录屏功能**
   - 一键开始录屏
   - 实时录制时间显示
   - 录屏预览和确认
   - 自动上传录屏视频

4. **详情页面**
   - 视频播放器
   - 内容信息展示

## 技术架构

### 前端技术栈
- Vue 3 + JavaScript (ES5兼容)
- HTML5 video标签播放视频
- MediaRecorder API实现录屏功能
- FormData API处理文件上传

### 后端技术栈
- Spring Boot
- Java 8+
- 文件存储：本地文件系统
- 数据存储：内存存储（可扩展为数据库）

## 快速开始

### 方法一：使用启动脚本（推荐）
双击运行 `启动企业知识管理系统.bat` 文件

### 方法二：手动启动

#### 1. 启动后端服务
```bash
cd tool
mvn spring-boot:run
```
后端服务将在 http://localhost:8080 启动

#### 2. 启动前端服务
```bash
cd js
npm run dev
```
前端服务将在 http://localhost:5173 启动

#### 3. 访问系统
打开浏览器访问 http://localhost:5173/enterprise-wiki

## 使用指南

### 搜索内容
1. 在搜索框中输入标题关键词
2. 点击搜索按钮或按回车键
3. 查看搜索结果列表（包含视频预览）
4. 点击任意结果查看详情

### 添加新内容
1. 点击右上角的"添加视频"按钮
2. 填写标题（必填）
3. 选择视频来源：
   - **上传视频文件**：点击文件选择器上传本地视频
   - **录屏功能**：点击"开始录屏"按钮，然后选择要录制的屏幕或窗口
4. 点击保存按钮

### 录屏功能使用
1. **开始录屏**
   - 点击"开始录屏"按钮
   - 系统弹出屏幕共享选择对话框
   - 选择要录制的屏幕或窗口
   - 系统开始录制，显示录制时间

2. **停止录屏**
   - 点击"停止录屏"按钮
   - 或关闭录制的窗口/标签页
   - 系统自动生成录屏预览

3. **确认录屏**
   - 查看录屏预览
   - 点击"使用此录屏"确认使用
   - 或点击"重新录制"重新开始
   - 系统自动上传录屏视频

### 查看内容详情
1. 点击搜索结果中的任意项目
2. 在详情页面查看视频播放器
3. 查看内容相关信息

## 录屏功能说明

### 支持的浏览器
- Chrome 74+
- Firefox 66+
- Edge 79+
- Safari 13+

### 录屏格式
- 格式：WebM (VP9编码)
- 质量：高质量屏幕录制
- 文件大小：根据录制时长和屏幕分辨率而定

### 录屏限制
- 需要用户授权屏幕共享
- 仅支持HTTPS环境下的录屏
- 录制时长建议不超过10分钟
- 文件大小限制：50MB

### 录屏步骤
1. 点击"开始录屏"按钮
2. 在弹出的对话框中选择要录制的屏幕或窗口
3. 开始录制，系统显示录制时间
4. 完成录制后点击"停止录屏"
5. 查看录屏预览
6. 点击"使用此录屏"确认使用
7. 系统自动上传并保存

## API接口

### 内容管理接口
- `GET /api/content/search?q=关键词` - 搜索内容
- `GET /api/content/{id}` - 获取内容详情
- `POST /api/content` - 创建新内容
- `PUT /api/content/{id}` - 更新内容
- `DELETE /api/content/{id}` - 删除内容

### 文件上传接口
- `POST /api/upload/video` - 上传视频文件
- `DELETE /api/upload/file?fileUrl=文件路径` - 删除文件

## 文件结构

```
项目根目录/
├── js/                          # 前端Vue项目
│   ├── src/
│   │   ├── views/
│   │   │   └── EnterpriseWiki.vue    # 主页面
│   │   ├── components/
│   │   │   ├── ContentDetailModal.vue # 内容详情模态框
│   │   │   └── AddContentModal.vue    # 添加内容模态框（含录屏功能）
│   │   └── router/
│   │       └── index.js              # 路由配置
│   └── package.json
├── tool/                        # 后端Spring Boot项目
│   └── src/main/java/com/tool/
│       ├── controller/
│       │   ├── ContentController.java     # 内容控制器
│       │   └── FileUploadController.java  # 文件上传控制器
│       ├── service/
│       │   └── ContentService.java        # 内容服务
│       ├── entity/
│       │   └── Content.java              # 内容实体
│       └── dto/
│           └── ContentDTO.java           # 数据传输对象
├── uploads/                     # 上传文件存储目录
│   └── videos/                  # 视频文件（包括录屏文件）
└── 启动企业知识管理系统.bat      # 启动脚本
```

## 注意事项

1. **文件大小限制**：单个视频文件最大50MB
2. **支持的文件格式**：
   - 视频：mp4, avi, mov, wmv等
   - 录屏：webm格式
3. **浏览器兼容性**：支持现代浏览器（Chrome, Firefox, Safari, Edge）
4. **网络要求**：需要稳定的网络连接用于文件上传
5. **录屏要求**：需要HTTPS环境或localhost环境

## 系统要求

### 开发环境
- Node.js 14+
- Java 8+
- Maven 3.6+

### 运行环境
- Windows 10/11
- 现代浏览器（支持MediaRecorder API）
- 至少2GB可用内存
- 支持屏幕共享的浏览器

## 故障排除

### 常见问题

1. **前端无法连接后端**
   - 检查后端服务是否启动
   - 确认端口8080未被占用
   - 检查CORS配置

2. **视频上传失败**
   - 检查文件大小是否超过限制（50MB）
   - 确认文件格式是否支持
   - 检查uploads目录权限

3. **录屏功能不可用**
   - 确认浏览器支持MediaRecorder API
   - 检查是否在HTTPS或localhost环境
   - 确认已授予屏幕共享权限
   - 尝试刷新页面重新授权

4. **录屏上传失败**
   - 检查录屏文件大小
   - 确认网络连接稳定
   - 查看浏览器控制台错误信息

5. **搜索无结果**
   - 确认搜索关键词是否正确
   - 检查是否有测试数据
   - 查看浏览器控制台错误信息

6. **启动脚本无法运行**
   - 确认已安装Java和Maven
   - 检查环境变量配置
   - 手动启动前后端服务

### 录屏功能故障排除

1. **录屏按钮不可点击**
   - 检查浏览器是否支持MediaRecorder API
   - 确认在HTTPS或localhost环境
   - 尝试使用Chrome或Firefox浏览器

2. **录屏时没有画面**
   - 确认已选择正确的屏幕或窗口
   - 检查是否有其他应用占用屏幕
   - 尝试重新选择录制区域

3. **录屏文件过大**
   - 减少录制时长
   - 降低屏幕分辨率
   - 关闭不必要的应用程序

### 日志查看
- 后端日志：查看控制台输出
- 前端日志：打开浏览器开发者工具查看Console

## 扩展功能

### 数据库集成
当前使用内存存储，可以轻松扩展为MySQL、PostgreSQL等数据库：

1. 添加数据库依赖
2. 创建数据库表结构
3. 实现Repository层
4. 更新Service层使用数据库

### 用户认证
可以添加用户登录和权限管理：

1. 集成Spring Security
2. 添加用户实体和权限管理
3. 实现登录和注册功能
4. 添加内容访问权限控制

### 高级搜索
可以添加更强大的搜索功能：

1. 集成Elasticsearch
2. 实现全文搜索
3. 添加搜索过滤和排序
4. 支持搜索建议

### 录屏功能增强
可以进一步扩展录屏功能：

1. 添加音频录制
2. 支持摄像头录制
3. 添加录屏编辑功能
4. 支持录屏压缩和优化

## 联系支持
如有问题或建议，请联系开发团队。 