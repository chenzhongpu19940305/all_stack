<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>代码展示功能测试</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f5f7;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #e0e0e0;
        }
        .header h1 {
            color: #2196F3;
            margin: 0;
        }
        .test-section {
            margin-bottom: 2rem;
            padding: 1rem;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
        }
        .test-section h3 {
            color: #333;
            margin-top: 0;
        }
        .code-preview {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 1rem;
            border-radius: 6px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.4;
            overflow-x: auto;
            margin: 1rem 0;
        }
        .language-tag {
            background: #2196F3;
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 0.5rem;
        }
        .description {
            color: #666;
            font-style: italic;
            margin-bottom: 1rem;
        }
        .test-links {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 2rem;
        }
        .test-link {
            background: #2196F3;
            color: white;
            text-decoration: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            transition: background-color 0.3s ease;
        }
        .test-link:hover {
            background: #1976D2;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 0.5rem 0;
            border-bottom: 1px solid #f0f0f0;
        }
        .feature-list li:before {
            content: "✅ ";
            color: #4CAF50;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>💻 代码展示功能测试</h1>
            <p>基于Gallery模块扩展的代码片段管理功能</p>
        </div>

        <div class="test-section">
            <h3>功能特性</h3>
            <ul class="feature-list">
                <li>支持多种编程语言（JavaScript、Java、Python、C++、C#、PHP、Go、Rust、SQL、HTML、CSS、Vue、React、TypeScript等）</li>
                <li>代码语法高亮显示</li>
                <li>支持长代码片段（LONGTEXT类型）</li>
                <li>新增、编辑、删除代码片段</li>
                <li>搜索代码片段（支持标题、描述、代码内容搜索）</li>
                <li>卡片式布局展示</li>
                <li>代码预览（显示前5行）</li>
                <li>全屏代码查看</li>
                <li>一键复制代码功能</li>
                <li>支持粘贴代码</li>
                <li>支持拖拽代码文件</li>
                <li>响应式设计，支持移动端</li>
            </ul>
        </div>

        <div class="test-section">
            <h3>代码展示示例</h3>
            
            <div class="language-tag">JavaScript</div>
            <div class="description">Vue 3 Composition API 示例</div>
            <div class="code-preview">
import { ref, reactive, onMounted } from 'vue'

export default {
  name: 'ExampleComponent',
  setup() {
    const count = ref(0)
    const state = reactive({
      message: 'Hello Vue 3!'
    })
    
    const increment = () => {
      count.value++
    }
    
    onMounted(() => {
      console.log('Component mounted')
    })
    
    return {
      count,
      state,
      increment
    }
  }
}</div>

            <div class="language-tag">Java</div>
            <div class="description">Spring Boot 控制器示例</div>
            <div class="code-preview">
@RestController
@RequestMapping("/api")
public class ExampleController {
    
    @Autowired
    private ExampleService exampleService;
    
    @GetMapping("/items")
    public ResponseEntity<List<Item>> getItems() {
        List<Item> items = exampleService.getAllItems();
        return ResponseEntity.ok(items);
    }
    
    @PostMapping("/items")
    public ResponseEntity<Item> createItem(@RequestBody Item item) {
        Item createdItem = exampleService.createItem(item);
        return ResponseEntity.status(HttpStatus.CREATED).body(createdItem);
    }
}</div>

            <div class="language-tag">Python</div>
            <div class="description">Flask Web应用示例</div>
            <div class="code-preview">
from flask import Flask, request, jsonify
from flask_cors import CORS

app = Flask(__name__)
CORS(app)

@app.route('/api/items', methods=['GET'])
def get_items():
    items = [
        {'id': 1, 'name': 'Item 1'},
        {'id': 2, 'name': 'Item 2'}
    ]
    return jsonify(items)

@app.route('/api/items', methods=['POST'])
def create_item():
    data = request.get_json()
    # 处理数据
    return jsonify({'message': 'Item created'}), 201

if __name__ == '__main__':
    app.run(debug=True)</div>
        </div>

        <div class="test-section">
            <h3>技术实现</h3>
            <ul class="feature-list">
                <li><strong>前端：</strong>Vue 3 + Composition API，响应式设计</li>
                <li><strong>后端：</strong>Spring Boot + MyBatis + MySQL</li>
                <li><strong>数据库：</strong>复用了Gallery模块的表结构，添加了code和language字段</li>
                <li><strong>API：</strong>复用了Gallery的API接口，支持代码片段的CRUD操作</li>
            </ul>
        </div>

        <div class="test-section">
            <h3>数据库结构</h3>
            <div class="code-preview">
-- gallery_records表结构
CREATE TABLE gallery_records (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255) NOT NULL COMMENT '记录标题',
    description TEXT COMMENT '记录描述',
    code LONGTEXT COMMENT '代码内容',
    language VARCHAR(50) COMMENT '编程语言',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_title (title),
    INDEX idx_language (language),
    INDEX idx_created_at (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;</div>
        </div>

        <div class="test-links">
            <a href="/code-gallery" class="test-link">访问代码展示页面</a>
            <a href="/gallery" class="test-link">访问图片展示页面</a>
            <a href="/" class="test-link">返回主页</a>
        </div>
    </div>
</body>
</html> 