# 思维导图组件使用文档

## 简介

思维导图组件是一个简单的可视化工具，允许用户创建和编辑类似思维导图的结构。该组件支持节点的添加、删除、编辑和拖拽功能，帮助用户组织和可视化思维过程。

## 功能特点

- **添加节点**：创建新的思维导图节点
- **添加条件分支**：创建条件分支节点
- **删除节点**：移除选中的节点及其所有子节点
- **编辑节点**：双击节点可以编辑节点内容
- **拖拽节点**：通过鼠标拖拽调整节点位置
- **节点连接**：自动创建父子节点之间的连接线
- **自由添加连接箭头**：在任意节点间添加自定义连接
- **节点类型切换**：支持普通节点和条件分支节点的切换
- **清空功能**：一键清空整个思维导图

## 使用方法

### 访问思维导图

1. 在应用导航栏中点击「思维导图」选项
2. 或直接访问 `/mind-map` 路径

### 基本操作

1. **创建第一个节点**：
   - 如果思维导图为空，点击「添加节点」按钮会创建一个中心节点
   - 中心节点默认文本为「中心主题」

2. **添加普通子节点**：
   - 选中一个已有节点
   - 点击「添加节点」按钮
   - 新节点将作为选中节点的子节点创建

3. **添加条件分支节点**：
   - 选中一个已有节点
   - 点击「添加条件分支」按钮
   - 新的条件分支节点将作为选中节点的子节点创建
   - 条件分支节点以橙色边框和黄色背景显示

4. **更改节点类型**：
   - 选中要更改的节点
   - 在右侧的「节点类型」下拉菜单中选择「普通节点」或「条件分支」
   - 节点样式会相应更新

5. **编辑节点内容**：
   - 选中要编辑的节点（会显示"双击编辑"提示）
   - 双击节点开始编辑模式
   - 节点会自动扩大并显示编辑状态
   - 直接输入文本内容
   - 按回车键或点击其他区域完成编辑
   - 按ESC键可取消编辑并恢复原文本

6. **删除节点**：
   - 选中要删除的节点
   - 点击「删除节点」按钮
   - 注意：删除节点会同时删除其所有子节点

7. **移动节点**：
   - 直接拖拽节点到新位置
   - 节点之间的连接线会自动更新

8. **清空思维导图**：
   - 点击「清空」按钮可以删除所有节点

9. **添加自定义连接箭头**：
   - 点击「添加连接」按钮进入连接模式
   - 先点击起始节点，然后点击目标节点
   - 系统会自动创建一个带箭头的连接线
   - 可以继续添加更多连接，或点击「退出连接模式」按钮退出

10. **选择和删除连接**：
    - 点击任意连接线可以选中它（连接线会变为高亮状态）
    - 选中连接线后，点击「删除连接」按钮可以删除该连接
    - 注意：只能删除自定义连接，不能删除父子节点间的自动连接

## 技术实现

思维导图组件基于Vue 3的组合式API实现，主要技术特点包括：

- 使用响应式数据管理节点状态
- 支持多种节点类型（普通节点和条件分支节点）
- 节点类型动态切换功能
- SVG绘制节点之间的连接线
- 自定义连接箭头的创建和管理
- 连接模式实现任意节点间的箭头连接
- 事件处理实现拖拽功能
- 递归算法处理节点层级关系
- 不同节点类型的样式区分（普通节点使用绿色边框，条件分支节点使用橙色边框和黄色背景）

## 注意事项

- 当前版本为基础实现，支持简单的思维导图功能
- 暂不支持保存和加载思维导图数据
- 建议在较大屏幕上使用，以获得更好的操作体验

## 未来计划

- 添加思维导图保存和加载功能
- 支持更多节点样式和连接线样式
- 添加导出为图片功能
- 优化移动设备上的使用体验